name: Client pipeline
  
on:
  push:
    branches:
      -main
    pull_requests:
      branches: [main]
      types: [open, synchronize]
        
jobs:
  simple_deployment_pipeline:
  if: ${{ github.event_name == 'push'}}
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-node@v2
      with:
        node-version: '18'
    - name: npm install
      run: npm install
    - name: lint
      run: npm run lint
    - name: tests
      uses: cypress-io/github-action@v2
      with:
        command: npm run tests
        start: npm start
        wait-on: http://localhost:3000